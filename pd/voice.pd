#N canvas 2 48 1020 718 10;
#X obj 170 78 inlet;
#X obj 657 189 inlet;
#X text 166 59 trigger;
#X obj 170 100 sel 0;
#X obj 403 220 t b;
#X obj 714 189 inlet;
#X obj 593 441 line~;
#X obj 781 184 inlet;
#X obj 838 189 inlet;
#X obj 911 188 inlet;
#X msg 170 122 stop;
#X obj 286 572 outlet~;
#X text 324 373 and pack with;
#X text 325 395 attack time;
#X text 253 123 if zero;
#X text 252 139 release;
#X text 234 157 and cancel;
#X text 265 174 decay;
#X text 500 302 recall sustain value;
#X text 537 375 pack with decay time;
#X text 827 329 on release ramp;
#X text 828 346 back to zero;
#X obj 723 326 * 0.01;
#X text 235 -1 ADSR ENVELOPE;
#X text 710 167 attack;
#X text 777 166 decay;
#X text 831 167 sustain;
#X text 908 167 release;
#X text 337 148 attack;
#X obj 339 169 moses;
#X obj 339 195 t b b;
#X msg 366 301 0;
#X text 301 270 optionally;
#X text 291 288 bash to zero;
#X text 306 243 ATTACK:;
#X text 454 84 test for negative trigger;
#X text 469 109 the output;
#X text 525 352 multiply by peak level;
#X text 498 325 convert from percent;
#X text 377 337 ... then;
#X text 325 356 recall peak level;
#X text 463 129 ... do this;
#X text 430 -2 Arguments: level \, attack time \, decay time \, sustain
level \, release time. A \, D \, and R are in msec and S is in percent.
This patch is used as an abstraction in various examples.;
#X obj 118 55 mtof;
#X obj 91 2 inlet;
#X text 464 96 if so \, zero;
#X obj 284 506 *~;
#X obj 779 44 loadbang;
#X obj 779 65 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 778 144 30;
#X msg 713 142 20;
#X msg 849 148 30;
#X msg 654 145 1;
#X obj 461 60 inlet;
#X obj 398 570 outlet~;
#X obj 91 29 sel 0;
#X msg 916 150 666;
#X floatatom 52 151 5 0 0 0 - - -, f 5;
#X obj 52 293 pack f f;
#X msg 158 266 0;
#X obj 95 256 + 0;
#X obj 113 295 pack f f;
#X obj 340 507 *~;
#X obj 398 493 * 0.5;
#X obj 398 516 + 0.5;
#X floatatom 110 233 5 0 0 0 - - -, f 5;
#X msg 342 439 0;
#X msg 406 440 -0.7;
#X msg 376 440 0.7;
#X obj 911 241 r global_speed;
#X floatatom 911 291 5 0 0 0 - - -, f 5;
#X obj 911 267 * 0.5;
#X obj 285 542 pan/gpan~;
#X obj 51 423 *~ 1;
#X obj 203 425 *~ 1;
#X obj 110 195 r binaural_diff_voice_\$1;
#X obj 97 150 r slide_msec_voice_\$1;
#X obj 53 488 r wavetable_sines\$1;
#X obj 53 516 sinesum_from_message sines\$1;
#X obj 52 400 tabosc4~ sines\$1;
#X obj 202 402 tabosc4~ sines\$1;
#X obj 723 302 f \$5;
#X obj 834 303 pack 0 \$6;
#X obj 723 376 pack 0 \$4;
#X obj 723 278 del \$3;
#X obj 403 278 pack 0 \$3;
#X obj 403 253 f \$2;
#X obj 723 352 * \$1;
#X text 464 148 in any case;
#X text 531 269 on attack \, set a delay for sustain;
#X text 502 283 comment;
#X text 626 165 peak level;
#X obj 130 572 send~ voice\$1_signal_left;
#X obj 448 569 send~ voice\$1_signal_right;
#X obj 648 50 r adsr_voice_\$1;
#X obj 648 72 unpack f f f f;
#X floatatom 715 218 5 0 0 0 - - -, f 5;
#X floatatom 775 217 5 0 0 0 - - -, f 5;
#X floatatom 643 212 10 0 0 0 - - -, f 10;
#X obj 574 118 r peak_level_voice_\$1;
#X floatatom 114 172 10 0 0 0 - - -, f 10;
#X obj 52 376 line~;
#X obj 203 378 line~;
#X connect 0 0 3 0;
#X connect 1 0 98 0;
#X connect 3 0 10 0;
#X connect 3 0 82 0;
#X connect 3 1 29 0;
#X connect 4 0 84 0;
#X connect 4 0 86 0;
#X connect 5 0 96 0;
#X connect 6 0 46 1;
#X connect 6 0 62 1;
#X connect 7 0 97 0;
#X connect 8 0 81 1;
#X connect 9 0 82 1;
#X connect 10 0 84 0;
#X connect 22 0 87 0;
#X connect 29 0 30 0;
#X connect 29 1 4 0;
#X connect 30 0 4 0;
#X connect 30 1 31 0;
#X connect 31 0 6 0;
#X connect 43 0 57 0;
#X connect 44 0 3 0;
#X connect 44 0 55 0;
#X connect 46 0 72 0;
#X connect 47 0 48 0;
#X connect 48 0 52 0;
#X connect 48 0 50 0;
#X connect 48 0 49 0;
#X connect 48 0 51 0;
#X connect 48 0 56 0;
#X connect 48 0 59 0;
#X connect 49 0 97 0;
#X connect 50 0 96 0;
#X connect 51 0 81 1;
#X connect 52 0 98 0;
#X connect 53 0 63 0;
#X connect 55 1 43 0;
#X connect 56 0 82 1;
#X connect 57 0 58 0;
#X connect 57 0 60 0;
#X connect 58 0 101 0;
#X connect 59 0 58 1;
#X connect 59 0 61 1;
#X connect 60 0 61 0;
#X connect 61 0 102 0;
#X connect 62 0 72 1;
#X connect 63 0 64 0;
#X connect 64 0 72 2;
#X connect 65 0 60 1;
#X connect 66 0 63 0;
#X connect 67 0 63 0;
#X connect 68 0 63 0;
#X connect 69 0 71 0;
#X connect 71 0 70 0;
#X connect 71 0 82 1;
#X connect 72 0 11 0;
#X connect 72 0 92 0;
#X connect 72 1 54 0;
#X connect 72 1 93 0;
#X connect 73 0 46 0;
#X connect 74 0 62 0;
#X connect 75 0 65 0;
#X connect 76 0 58 1;
#X connect 76 0 61 1;
#X connect 76 0 100 0;
#X connect 77 0 78 0;
#X connect 79 0 73 0;
#X connect 80 0 74 0;
#X connect 81 0 22 0;
#X connect 82 0 6 0;
#X connect 83 0 6 0;
#X connect 84 0 81 0;
#X connect 85 0 6 0;
#X connect 86 0 85 0;
#X connect 87 0 83 0;
#X connect 94 0 95 0;
#X connect 95 0 96 0;
#X connect 95 1 97 0;
#X connect 95 2 81 1;
#X connect 95 3 82 1;
#X connect 96 0 84 1;
#X connect 96 0 85 1;
#X connect 97 0 83 1;
#X connect 98 0 86 1;
#X connect 98 0 87 1;
#X connect 99 0 98 0;
#X connect 101 0 79 0;
#X connect 102 0 80 0;
